!function(a){a.fn.listbox=function(b){function g(){return a.extend({removeItem:d.list?a.proxy(d.list.removeItem,d.list):null,addRange:d.list?a.proxy(d.list.addRange,d.list):null,addItem:d.list?a.proxy(d.list.addItem,d.list):null,removeRange:d.list?a.proxy(d.list.removeRange,d.list):null,getDatas:d.list?a.proxy(d.list.getDatas,d.list):null,getData:d.list?a.proxy(d.list.getData,d.list):null,clearDisplay:d.list?a.proxy(d.list.clearDisplay,d.list):null,clearData:d.list?a.proxy(d.list.clearData,d.list):null,getSelected:d.list?a.proxy(d.list.getSelected,d.list):null,getDataByID:d.list?a.proxy(d.list.getDataByID,d.list):null,setSelection:d.list?a.proxy(d.list.setSelection,d.list):null,reload:d.list?a.proxy(d.list.reload,d.list):null,upRange:d.list?a.proxy(d.list.upRange,d.list):null,downRange:d.list?a.proxy(d.list.downRange,d.list):null},c)}function h(a){if(a)for(var c=0;c<a.length;c++)e.addItem(a[c])}var e,f,i,j,c=this,d=c.get(0);if("string"==typeof b){if(e=d.list,b in e)return f=a.makeArray(arguments).slice(1),e[b].apply(e,f);throw"clever listbox not contains such function"}return d.list?g():(i={dnd:!1,dndscope:(new Date).getTime(),height:"auto",width:"auto",data:[],multiselect:!1,ajaxsettings:{},selectchange:function(){return!1}},b=a.extend(i,b||{}),j=a(d),e={p:b,addRange:function(a){for(var b=0;b<a.length;b++)this.addItem(a[b]),this.p.data.push(a[b])},selected:function(){return e.p.selectchange},addItem:function(b){var d,c=b;(b instanceof Array||!("value"in b)||!1 in b)&&(c.value=b[0],c.text=b[1]),d=a('<li class="ui-menu-item ui-corner-all"><a  style="font-size:14px" id="'+c.value+'" class="ui-corner-all" tabindex="-1">'+c.text+"</a>"),j.append(d),a("a",d).click(function(){var h,i,b=a(this),c=arguments[0]||window.event,f=d.parent(),g=a(">li",f);e.p.multiselect&&c.ctrlKey?b.hasClass("ui-state-active")?b.removeClass("ui-state-active"):b.addClass("ui-state-active"):(h=a("a.ui-state-active",f).parent(),a("a",f).removeClass("ui-state-active"),(0==h.size()||g.index(h)!=g.index(d))&&b.addClass("ui-state-active")),b.blur(),i=a(this).parents("ul:first").get(0).list,i.selected()(i.getSelected())}).mouseover(function(){a(this).hasClass("ui-state-active")||a(this).addClass("ui-state-hover")}).mouseout(function(){a(this).removeClass("ui-state-hover")}),e.p.dnd},removeRange:function(a){if(a&&a instanceof Array)for(var b=0;b<a.length;b++)this.removeItem(a[b]);this.reload()},removeItem:function(a){var c,d,b=a;for(a instanceof jQuery?b=this.getData(a).value:"object"==typeof a&&(b=a.value),c=this.p.data.length,d=0;c>d;d++)if(a.value==this.p.data[d].value){this.p.data.splice(d,1);break}j.find('a[id="'+b+'"]').remove()},getData:function(b){return b?(b instanceof jQuery||(b=a(b)),{value:b.attr("id"),text:b.text()}):null},getSelected:function(){var b=a("a.ui-state-active",j),c=[];return b.each(function(){c.push(e.getData(this))}),c},getDataByID:function(a){var b=[],c=j.find('a[id="'+a+'"]');return c.length>0&&b.push({value:c.attr("id"),text:c.text()}),b},getDatas:function(){var b=[];return a(">li>a:first-child",j).each(function(){b.push(e.getData(this))}),b},setSelection:function(b){a("a",j).removeClass("ui-state-active").parent().css("margin-top",""),a('a[id="'+b+'"]',j).addClass("ui-state-active")},clearDisplay:function(){j.empty()},clearData:function(){e.p.data=[]},reload:function(b){e.p=a.extend(e.p,b||{}),e.clearDisplay(),h(e.p.data,e.p.ajaxsettings)},upRange:function(a){var b,c;if(void 0!=a&&null!=a&&0!=a.length)for(b=null,c=0;c<e.p.data.length;c++)if(a[0].value==e.p.data[c].value){if(0==c)return;b=e.p.data[c-1],e.p.data[c-1]=e.p.data[c],e.p.data[c]=b,this.reload(),this.setSelection(a[0].value);break}},downRange:function(a){var b,c;if(void 0!=a&&null!=a&&0!=a.length)for(b=null,c=0;c<e.p.data.length;c++)if(a[0].value==e.p.data[c].value){if(c==e.p.data.length-1)return;b=e.p.data[c+1],e.p.data[c+1]=e.p.data[c],e.p.data[c]=b,this.reload(),this.setSelection(a[0].value);break}}},d.list=e,c.addClass("cleverlistbox ui-menu ui-widget ui-widget-content ui-corner-all"),("number"==typeof e.p.height||"string"!=typeof e.p.height&&"auto"!=e.p.height.toLowerCase())&&(c.css("overflow-y","auto"),c.css("overflow-x","hidden"),c.height(e.p.height)),"number"==typeof e.p.width||"string"!=typeof e.p.width&&"auto"!=e.p.width.toLowerCase()?c.width(e.p.width):c.width(c.parent().width()-2),h(e.p.data,e.p.ajaxsettings),g())}}(jQuery);